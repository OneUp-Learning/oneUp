<!DOCTYPE html>
<html lang="en">
   <head>
      {% include 'scripts.html' %}
      <script>
         function validate()
         {
          var student = document.getElementById("badgeOption");
          var badge = document.getElementById("studentOption");
         
          var studentSelectedValue = student.options[badge.selectedIndex].value;
             if (studentSelectedValue == "option")
             {
              alert("Please select the student!");
              return false;
             }
             
             var badgeSelectedValue = badge.options[student.selectedIndex].value;
             if (badgeSelectedValue == "option")
            {
             alert("Please select the badge!");
             return false;
            }
             
         }
         
      </script>
      <script>
         function validateCheckBox(){
          var checkBoxes = document.getElementsByName( 'checkboxes' );
          var isChecked = false;
              for (var i = 0; i < checkBoxes.length; i++) {
                  if ( checkBoxes[i].checked ) {
                      isChecked = true;
                  };
              };
              if ( isChecked ) {
                  return true;
                  } else {
                      alert( 'Please check at least one checkbox!' );
                      return false;
                  }   
          }
      </script>
      <style>
         #badge {
         display: inline-block;
      </style>
   </head>
   <body>
      {% include 'heading.html' %}  
      <main>
         <div class="row center-align">
            <div class="col s12">
               <h5>Assign Badges To Students</h5>
            </div>
         </div>
         <div class="row">
            <div class="col s12 m8 offset-m2">
               <div class="card">
                  <form id="update" name="update" onsubmit="return validate()" action="/oneUp/badges/AddBadgeManually" method="post">
                     <div class="card-content">
                        {% csrf_token %}
                        <table>
                           <th>Student</th>
                           <th> Badge</th>
                           <tbody>
                              <tr>
                                 <td>
                                    <div class="select-wrapper">
                                       <select id="studentOption" name="userID" >
                                          <option value="option" selected>Select Student</option>
                                          {% for userID, studentName in students %}
                                          <option id="userID"  value="{{userID}}">{{studentName}}</option>
                                          {% endfor %}
                                       </select>
                                 </td>
                                 <td>
                                 <select id="badgeOption" name="badgeID" >
                                 <option value="option"selected>Select Badge</option>
                                 {% for badgeID, badgeDescrip in badges %}
                                 <option id="badgeID"  value="{{badgeID}}">{{badgeDescrip}}</option>
                                 {% endfor %}
                                 </select>
                                 </div>
                                 </td>
                                 <td></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <div class="card-action right-align">
                        <div class="row">
                           <div class="col s12">
                              <button class="btn waves-effect waves-light" type="submit">Assign Badge
                              <i class="material-icons right">send</i>
                              </button>
                           </div>
                        </div>
                     </div>
                  </form>
               </div>
            </div>
         </div>
         <div class="row center-align">
            <div class="col s12">
               <h5>Remove Badges From Students</h5>
            </div>
         </div>
         <div class="row">
            <div class="col s12 m8 offset-m2">
               <div class="card">
                  <form onsubmit="return validateCheckBox()" action="/oneUp/badges/AddBadgeManually" method="post">
                     <div class="card-content">
                        {% csrf_token %}
                        {%for studentName, earnedBadges in studentBadges%}
                        <div style="padding-bottom: .5em;">
                           <br>
                           <!-- if the student has no earned badges, dont display the student name GGM -->
                           {% if earnedBadges %}
                           <p><b>{{studentName}}</b></p>
                           {%for badgeId, badgeName, badgeImage in earnedBadges %}
                           <div id="badge" style="padding-right: 2em;">
                              <input type="checkbox" style="padding:0;" name="checkboxes" value="{{badgeId}}" id="{{badgeId}}" />
                              <label id="badge" for="{{badgeId}}" style="padding:.5em;"></label>
                              <img src="/{{badgeImage}}" width="46px" height="46px">
                              <figcaption>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{badgeName}}</figcaption>
                           </div>
                           {% endfor %}
                        </div>
                        {% endif %}
                        {% endfor %}
                     </div>
                     <div class="card-action right-align">
                        <div class="row">
                           <div class="col s12">
                              <button class="btn waves-effect waves-light" type="submit">Delete Badge
                              <i class="material-icons right">send</i>
                              </button>
                           </div>
                        </div>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </main>
      <!-- Footer -->
      {% include 'footer.html' %}
   </body>
</html>