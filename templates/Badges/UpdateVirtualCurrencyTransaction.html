<!DOCTYPE html>
<html lang="en">
   <head>
      {% include 'scripts.html' %}
   </head>
   <body>
      {% include 'heading.html' %}  
      <main>
         <div class="row center-align">
            <div class="col s12">
               <h3>Transaction</h3>
            </div>
         </div>
         <div class="row">
            <div class="col s12 m8 offset-m2">
               <div class="card-panel">
                  <table>
                     <thead>
                        <th>Student</th>
                        <th>Item Name</th>
                        <th>Item Description</th>
                        <th>Date Purchased</th>
                        <th>Item Cost</th>
                        <th>Current Status</th>
                     </thead>
                     <tbody>
                        <tr>
                           <td>{{student}}</td>
                           <td>{{name}}</td>
                           <td>{{description}}</td>
                           <td>{{purchaseDate}}</td>
                           <td>{{total}}</td>
                           <td><b>{{status}}</b></td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
         <div class="row">
         <div class="col s12 m8 offset-m2">
            <form name="UpdateTransaction" action="/oneUp/badges/UpdateVirtualCurrencyTransaction" method="post">
               {% csrf_token %}
               <input type="hidden" name="transactionID" value="{{transactionID}}">
               <div class="card">
                  <div class="card-content">
                     <div class="row">
                        <div class="input-field col s12">
                           <input value="{{noteForStudent}}" name="studentNotes" id="student_notes" type="text" pattern=".*\S+.*" >
                           <label for="student_notes">Student Note</label>
                        </div>
                     </div>
                     <div class="row">
                        <div class="input-field col s12">
                           <input value="{{instructorNote}}" name="instructorNotes" id="instructor_notes" type="text" pattern=".*\S+.*" >
                           <label for="instructor_notes">Instructor Note</label>
                        </div>
                     </div>
                     <div class="row">
                        <div class="input-field col s12">
                           <select name="updateStatus" {%if view%}readonly{%endif%}>
                           <option value="" disabled selected>Choose Status</option>
                           <option id="Requested" value="Requested">Requested</option>
                           <option id="In Progress" value="In Progress">In Progress</option>
                           <option id="Complete" value="Complete">Complete</option>
                           </select>
                           <label>Set Status</label>
                           <script  type="text/javascript"> 
                              window.onload = function() {
                              	if ("{{status}}" != '')  {
                              	document.getElementById("{{status}}").selected = "true";
                              	} 
                              }
                           </script> 
                        </div>
                     </div>
                  </div>
                  <div class="card-action right-align">
                     <button class="btn waves-effect waves-light" type="submit" name="submit">Update<i class="material-icons right">send</i>
                     </button>
                     <a class="waves-effect waves-light btn modal-trigger" href="#modal_delete"><i class="material-icons right">undo</i>Revert</a>
                    
                     <a class="waves-effect waves-light btn" href="/oneUp/badges/VirtualCurrencyTransactions">											
                     <i class="material-icons left">close</i>Cancel</a>                                                                  									
                  </div>
                   <div id="modal_delete" class="modal">
                                    <div class="modal-content">
                                       <h5>Are you sure you want to revert?</h5>
                                       <p>The transaction will be deleted.</p>
                                    </div>
                                    <div class="modal-footer">
                                       <a href="#!" class="modal-action modal-close waves-effect waves-light btn-flat">Cancel</a>
                                       <button class="modal-action modal-close waves-effect waves-light btn-flat"  type="submit" name="revert" value="Delete">Revert
                                       </button>                                        
                                    </div>
                                 </div>
            </form>
            </div>
         </div>
      </main>
      {% include 'footer.html' %}
   </body>
</html>