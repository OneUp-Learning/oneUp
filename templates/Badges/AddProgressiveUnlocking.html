<!DOCTYPE html>
<html lang="en">
   <head>
      {% include 'scripts.html' %} 
   </head>
   <body>
      {% include 'heading.html' %}
      <main>
         <div class="row center-align">
            <div class="col s12">
               <h3>Create New Progressive Unlocking Rule</h3>
            </div>
         </div>
         <form name="addNewPRule" action="/oneUp/badges/ProgressiveUnlocking" method="POST" onsubmit=" return condOnSubmit();">
          {% csrf_token %}
         <div class="row">
            <div class="col s12 m10 offset-m1">
               <div class="card-panel">
            
                    <div class="row">
                      <div class="input-field col s12">
                         <input placeholder="Rule Name" value="{{unlockingName}}" name="unlockingName" type="text" id="unlockingName">
                         <label for="unlockingName"><span class= "red-text">*</span>Unlocking Rule Name</label>
                      </div>
                   </div> 
                    <div class="row">
                          <div class="input-field col s12">
                             <input placeholder="Description" value="{{unlockingDescript}}" name="unlockingDescript" type="text" id="unlockingDescript">
                             <label for="unlockingDescript"><span class= "red-text">*</span>Unlocking Rule Description</label>
                          </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select name="ruleTargetObject" id="objects">
                                {% for obj in objs %}
                                  {% if ruleType == 1301 %}
                                    <option value={{obj.pk}}>{{obj.challengeName}}</option>
                                  {% elif ruleType == 1302 %}
                                    <option value={{obj.pk}} >{{obj.activityName}}</option>
                                  {% elif ruleType == 1306 %}
                                    <option value={{obj.pk}} >{{obj.topicID.topicName}}</option>
                                  {% endif %}
                                {% empty %}
                                {% endfor %}
                              </select>
                           <label for="ruleTargetObject"><span class= "red-text">*</span>Object Selection</label>
                        </div>
                     </div>
                    <input type="hidden" name="ruleObjectType" value={{ruleType}}>
                    <input type="hidden" name="whatWeAreDoing" value='create'>

                    {% include "Badges/unlockingConditionInterface.html" %}  
                    <div class="card-action right-align">
                        <!-- name will be changed depending on what this is GMM, either custom or edit GGM -->
                          <button id="button" class="btn waves-effect waves-light" type="submit" name="edit">Save<i class="material-icons right">send</i>
                           </button>
                           {% if edit %}
                           <a class="waves-effect waves-light btn modal-trigger" href="#modal_delete">Delete<i class="material-icons right">close</i></a>
                           {% endif %}
                           <a class="waves-effect waves-light btn" href="/oneUp/badges/Badges">											
                           <i class="material-icons left">navigate_before</i>Back</a>                                                                  									
                        </div>            
               </div>
            </div>
         </div>
         </form>
      </main>
      {% include 'footer.html' %}
   </body>
</html>
<!-- <script>
        function expand(){
          if($("#collapsible-custom-content").is(":hidden")){
             $("#collapsible-custom-content").fadeToggle();
             if($("#collapsible-custom-content").is(":visible")) {
               $("#unlockingDescript").prop('required',true);
               if($('#unlockingInput').length == 0){
                 $("#collapsible-custom-content").append("<input id='unlockingInput' type=hidden value=true name=unlockingInput />");
               }
            }
          }
          else {
            $("#collapsible-custom-content").fadeToggle();
            $("#unlockingDescript").removeAttr('required');
            $("#unlockingInput").remove();
        }
       }
</script> -->