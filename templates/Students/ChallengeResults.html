<!DOCTYPE html>
<html lang="en">
   <head>
      {% include 'scripts.html' %}
   </head>
   <style>
                           .editor{
                           position: relative;
                           width: 100%;
                           height: 150px;
                           }
                           .lineHighlight {
                           position: absolute;
                           background: rgba(100, 200, 100, 0.5);
                           z-index: 20
                           }
                        </style>
   <script src="/static/ThirdParty/ckeditor_4.6.2_custom1/ckeditor.js"></script>
   <script src="/static/ThirdParty/aceEditor/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
   <body>
      {% include 'stheading.html' %}
      <main>
         <div class="row center-align">
            <div class="col s12">
               <h3> Results for Challenge<i>{{challengeName}}</i></h3>
            </div>
         </div>
         <div class="row">
            <div class="col s12 m10 offset-m1">
               <form action="">
                  <div class="card">
                     <div class="card-content">
                        <span class="card-title">You scored <b>{{total_user_points}}</b> points out of <b>{{total_possible_points}}</b> points in this challenge.</span>
                        {% for q in questions %}
                        <div class="divider"></div>
                        <div class="row">
                           <p>{% autoescape off %} {{q.index}}. {{q.question.questionText|safe}} {% endautoescape %}</p>
                        </div>
                        <div class="row">
                           <div class="col s12">
                              <h5>Your Answer:</h5>
                           </div>
                        </div>
                        {% if q.question.type == questionTypes.multipleChoice %}
                        <div class="row">
                           <div class="col s12">
                              {% for j,answer in q.answers_with_count %}
                              <p>
                                 <input name="{{q.question.questionID}}" type="radio" id="ans-{{q.question.questionID}}-{{j}}" {% if q.user_answer.answerNumber == j %}checked{% else %} disabled {% endif %}/>
                                 <label for="ans-{{q.question.questionID}}-{{j}}">{% autoescape off %}{{answer.answerText|striptags}} {% endautoescape %}</label>
                              </p>
                              {% endfor %}
                           </div>
                        </div>
                        <div class="row">
                           <div class="col s12">
                              <h5>Correct Answer: </h5>
                              <blockquote>
                                 {{q.correct_answer_text|safe}}
                              </blockquote>
                              <p>You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
                           </div>
                        </div>
                        {% elif q.question.type == questionTypes.multipleAnswers %}
                        <div class="row">
                           <div class="col s12">
                              {% for j,answer in q.answers_with_count %}
                              <p>
                                 <input name="{{q.question.questionID}}" class="filled-in" type="checkbox" id="ans-{{q.question.questionID}}={{j}}" {% for user_answer in q.user_answers %}{% if j == user_answer.answerNumber %}checked{% endif %}{% endfor %} disabled/>
                                 <label for="ans-{{q.question.questionID}}-{{j}}">{% autoescape off %}{{answer.answerText|striptags}}{% endautoescape %}</label>
                              </p>
                              {% endfor %}
                           </div>
                        </div>
                        <div class="row">
                           <div class="col s12">
                              <h5>Correct Answer(s): </h5>
                              <blockquote>
                                 {% for correct_answer_text in q.correct_answer_texts %}
                                 {{correct_answer_text|safe}} <br />
                                 {% endfor %}
                              </blockquote>
                              <p>You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
                           </div>
                        </div>
                        {% elif q.question.type == questionTypes.matching %}
                        <div class="row">
                           <div class="col s6">
                              {% for j,answer in q.answers_with_count %}
                              <p>{{j}} . {{answer.answerText}}</p>
                              {% endfor %}
                           </div>
                        </div>
                        <div class="row">
                           <div class="col s6">
                              {% for user_answer in q.user_answers %}
                              <p>{{user_answer.answerNumber}} . {{user_answer.answerText}}</p>
                              {% endfor %}
                           </div>
                           <div class="col s6">
                              {% for match in q.matches %}
                              <p>{{match.matchingAnswerText}}</p>
                              {% endfor %}
                           </div>
                        </div>
                        <div class="row">
                           <div class="col s12">
                              <h5>Correct Answer(s): </h5>
                              <blockquote>
                                 <div style="column-count:2;">
                                    {% for match in q.matches %}
                                    <p>{{match.current_pos}} . {{match.answerText}}</p>
                                    {% endfor %}
                                    {% for match in q.matches %}
                                    <p>{{match.matchingAnswerText}}</p>
                                    {% endfor %}
                                 </div>
                              </blockquote>
                              <p>You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
                           </div>
                        </div>
                        {% elif q.question.type == questionTypes.trueFalse %}
                        <div class="row">
                           <div class="col s12">
                              <p>
                                 <input name="{{q.question.questionID}}" type="radio" id="ans1-{{q.question.questionID}}" {% if q.user_answer.answerValue %}checked{% else %}disabled="disabled"{% endif %}/>
                                 <label for="ans1-{{q.question.questionID}}">True</label>
                              </p>
                              <p>
                                 <input name="{{q.question.questionID}}" type="radio" id="ans2-{{q.question.questionID}}" {% if q.user_answer.answerValue %}disabled="disabled"{% else %}checked{% endif %}/>
                                 <label for="ans2-{{q.question.questionID}}">False</label>
                              </p>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col s12">
                              <h5>Correct Answer: </h5>
                              <blockquote>
                                 {{q.correctAnswerText}}
                              </blockquote>
                              <p>You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
                           </div>
                        </div>
                        {% elif q.question.type == questionTypes.parsons %}
                        <div class="row">
                           <div class="col s12">
                              <div id="student_editor{{q.question.questionID}}" class="editor"><textarea style="resize:none; border: solid 1px rgba(128, 128, 128, 0.5)" rows="20" cols="70" name="setupCode{{q.question.questionID}}" id="setupCode{{q.question.questionID}}">{{q.student_solution}}</textarea></div>
                              <script>
                                 var editor = ace.edit("student_editor{{q.question.questionID}}");
                                 editor.setTheme("ace/theme/chrome");
                                 editor.session.setMode("ace/mode/java");
                                 editor.setReadOnly(true);
                              </script>
                           </div>
                           <div class="row">
                              <div class="col s12">
                                 <h5>Example Correct  Solution:</h5>
                              </div>
                           </div>
                           <div class="row">
                           <div class="col s12">
                              <div id="model_editor{{q.question.questionID}}" class="editor"><textarea style="resize:none; border: solid 1px rgba(128, 128, 128, 0.5)" rows="20" cols="70" name="setupCode{{q.question.questionID}}" id="setupCode{{q.question.questionID}}">{{q.model_solution}}</textarea></div>
                              <script>
                                 var editor = ace.edit("model_editor{{q.question.questionID}}");
                                 editor.setTheme("ace/theme/chrome");
                                 editor.session.setMode("ace/mode/java");
                                 editor.setReadOnly(true);
                              </script>
                           </div>
                           </div>
                           <div class="row">
                           <div class = "col s12">
                           <p>You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
						  </div>
						  </div>
                        </div>
                        {% elif q.question.type == questionTypes.dynamic or q.question.type == questionTypes.templatedynamic %}
                        <div class="row">
                           {% for answer_blank_name, user_answer_value in q.user_answers.items %}
                           <p>For answer blank <b>{{answer_blank_name}}</b>: {{user_answer_value}}</p>
                           {% endfor %}
                        </div>
                        {% if q.evaluations %}
                        {% for answer in q.evaluations %}
                        <p>	
                           {% if answer.success %}
                           <span style='color: green;'>&#10004;</span> 
                           {% else %}
                           <span style='color: red;'>&#10006;</span>
                           {% endif %}
                           You got {{answer.value}} points on answer {{answer.name}}
                           {% if answer.details %}
                        <ul class="collection">
                           {% for detail in answer.details %}
                           <li class="collection-item">
                              {%if detail.success%}
                              <span style='color: green;'>&#10004;</span> 
                              {%else%}
                              <span style='color: red;'>&#10006;</span> 
                              {% endif %}
                              {{detail.value}}/{{detail.max_points}} points on criteria {{detail.name}}
                           </li>
                           {% endfor %}
                        </ul>
                        {% endif %}
                        </p>
                        {% endfor %}
                        {% endif %}
                        <div class="row">
                           <div class="col s12">
                              <p>Total for this question, You Scored: <b>{{q.user_points}}</b> Point(s) out of <b>{{q.total_points}}</b> Point(s)</p>
                           </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                     </div>
                     <div class="card-action right-align">
                        {% if view %}
                        <a class="waves-effect waves-ligh btn" href="/oneUp/students/ChallengesTaken?{% if not all %}challengeID={{challengeID}}{% endif %}{% if is_teacher %}&userID={{student}}{% endif %}{% if classAchievements %}&classAchievements{%endif%}{% if warmUp %}&warmUp{% endif %}{% if all %}&all{%endif%}">
                        {% elif warmUp %}									
                        <a class="waves-effect waves-light btn" href="/oneUp/students/ChallengesWarmUpList">
                        {% else %}
                        <a class="waves-effect waves-light btn" href="/oneUp/students/ChallengesList">											
                        {% endif %}
                        <i class="material-icons left">check</i>Done</a> 
                     </div>
                  </div>
               </form>
            </div>
         </div>
      </main>
      {% include 'footer.html' %}
   </body>
</html>