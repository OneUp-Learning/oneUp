<!DOCTYPE html>
<html lang="en">
   <head>
      {% include 'scripts.html' %}
      <script>
        $(document).ready(function(){
          $('.add_more').click(function(e){
            e.preventDefault();
            $(fileupload1).after('<div id="fileupload1" class="file-field input-field">\n'+
            '<div class="btn">\n'+'<span>File</span>\n'+'<input name="actFile" type="file" />\n'+'</div>\n'+
            '<div class="file-path-wrapper">\n'+'<input class="file-path validate" type="text" placeholder="Choose File"/>\n'+'</div>\n'+'</div>')
            document.getElementById('fileupload1').id = 'fileupload'
          });
        });
      </script>
   </head>
   <body>
      {% if is_teacher %}    
      {% include 'heading.html' %}
      {% else %}
      {% include 'stheading.html' %}
      {% endif %}
      <main>
         <div class="row center-align">
            <div class="col s12 m10 offset-m1">
               <h3 style="overflow-wrap: break-word; overflow: hidden; text-overflow: ellipsis;">{{activity.activityName}}</h3>
            </div>
         </div> 
         <div class="row">
            <div class="col s12 m10 offset-m1">
               <div class="card">
                  <form id="uploadbanner" action="/oneUp/students/ActivityDescription" enctype="multipart/form-data" method="POST" >
                  {% csrf_token %}   
                           
                     <div class="card-content">
                        <div class="section">
                           <h5>Activity Description</h5>
                           <p>{{activity.description}}</p>
                        </div>
                        <div>
                        <ul style="font-size: 16px;">
                        	<li >
                        		<span><b>Due </b></span>
                        		<span>{{activity.deadLine}}</span>
                        	</li>
                        	<li>
                        		<span><b>Points </b></span>
                        		<span>{{activity.points}}</span>
                        	</li>
                        </ul>
                        </div>
                        <!--  <div class="section">
                            <h4>Activity Due Date</h4>
                            <blockquote>{{activity.activityID.deadLine}}</blockquote>
                        </div>
                        <div class="section">
                           <h4>Activity Points</h4>
                           <blockquote>Your Score: {{activity.activityScore}} <br />
                           Total points: {{activity.activityID.points}}</blockquote>
                        </div> -->
                        <div class="section">
                           <h5>Instructor Note</h5> 
                           {% if feedback %}
                           		<p>{{feedback}}</p>
                           {% else %}
                           		<p>No feedback yet<p>
                           {% endif %}
                        </div>
                        {% if instructorHasFiles == True%}
                        <div class="section">
                          <h5>Activity Files</h5>
                          <!-- <div class="collection">
                          {% for instructorFile in instructorActFiles %}
                         
                          <a class="collection-item tooltipped" href="../../media/Instructors/instructorActivityFiles/{{instructorFile}}" data-position="left" data-delay="50" data-tooltip="Download" download>
                          	<i class="material-icons secondary-content">file_download</i>{{instructorFile}}
                          </a>
                           
                          {% endfor %}
                          </div> -->
                          <ul class="collapsible" data-collapsible="expandable">
                              {% for instructorFile in instructorActFiles %}
                              <li>
                                    <div class="collapsible-header"><a class="tooltipped" href="../../media/Instructors/instructorActivityFiles/{{instructorFile}}" data-position="left" data-delay="50" data-tooltip="Download" download><i class="material-icons secondary-content">file_download</i></a> {{instructorFile}} </div>
                                    <div class="collapsible-body">
                                       <div class='video-container'>
                                          <embed src="../../media/Instructors/instructorActivityFiles/{{instructorFile}}" width="100%" height="800px" />
                                       </div>
                                    </div>
                              </li>
                              {% endfor %}
                          </ul>
                        </div>
   			                {% endif %}
                        	   
                        {% if fileName %}
                          <div >
                           	<h5>Your Uploads</h5>
                          	<div>
	                           
		                            {% for file in fileName %}
		                           
		                                <!--  <a class="oldFiles" href="#!" data-position="left" data-delay="50" data-tooltip="Download" download>
		                                <i class="material-icons secondary-content">file_download</i>{{file}}</a> -->
		                            	<div><a class="oldFiles" href="#!">{{file}}</a><div>
		                            {% empty %}
		                            	<a class="oldFiles" href="#!" >No files uploaded</a>
		                            {% endfor %}
	                            
                          	</div>
                        </div>
                        {%endif%}
                        <input type="hidden" name="activityID" value="{{activity.activityID}}">	
                        {% if canUpload == True %}
                        <div class="section">
                           <h5>Upload Files</h5>
                           {% csrf_token %}   
                           <div id="fileupload1" class="file-field input-field">
                           </div>
                            <div id="upload_button">
                              	<a class="btn waves-effect waves-light add_more"><i class="material-icons left">add_circle</i>Add a file</a> 
                             </div>
                        </div>
                     
                    
                   {% endif %}
                   <h5>Your Comment</h5>
                   <div class="section">
                     <textarea placeholder="Comments..." name="comment" id="comment" class="materialize-textarea" style="line-height: 20px;  font-size: 14px; ">{{comment}}</textarea>
                   </div>
                   <div class="card-action">
                        <div class="row right-align">
                            <!--  <a class="btn waves-effect waves-light add_more">Add More Files</a>   -->
                            {% if isSubmitted %}
	                            <button class="btn waves-effect waves-light" type="submit" name="Upload">Resubmit
	                            <i class="material-icons right">send</i></button>
	                        {% else%}
	                        	<button class="btn waves-effect waves-light" type="submit" name="Upload">Submit
	                            <i class="material-icons right">send</i></button>
	                        {% endif %}
                            
                            <a class="btn waves-effect waves-light" href="/oneUp/students/ActivityList"><i class="material-icons left">navigate_before</i>Back</a> 										  						
                        </div>
                    </div>
                  </form>
               </div>
            </div>
         </div>
        
      </main>
      {% include 'footer.html' %}
   </body>
</html>