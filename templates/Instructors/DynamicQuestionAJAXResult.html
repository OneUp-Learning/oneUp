{% comment %}
	This template include expects the following variables:
		q - a question dictionary structure as generated by the appropriate function in questionTypes or the dynamicQuestionPartAJAX view
		part - a number indicating which part of the question this is
{% endcomment %}
{% if q.error %}
	<p><strong>Lua Error:</strong> 
	{% if q.error.type == 7702 %} <!-- Module Not Found Error -->
		Module not found.</p>
		<p>The module '{{q.error.module}}' does not exist despite being referenced in 
			{% if q.error.source == "module" %} module {{q.error.file}}
			{% else %} the following code segment: {% include 'Instructors/CodeSegmentError.html' %}
			{% endif %}
		</p>
	{% elif q.error.type == 7704 %} <!-- Required part not defined -->
		Required function not defined.</p>
		<p>Each problem part must have the function <tt>{{q.error.function_name}}</tt> defined.  The code for this question does not have that function defined.
		This can be caused either by omitting or misspelling the function in raw lua code or by certain syntax errors before the function definition
		in either raw lua or template mode.  Unfortunately, we have no other information about the location of the error.</p>
	{% elif q.error.type == 7701 or error.type == 7703 %} <!-- Syntax Error or Runtime Error (any sort) -->
		{% if q.error.type == 7701 %} Syntax {% else %} Runtime {% endif %} Error in Lua code. </p>
		<p>There was a {% if q.error.type == 7701 %} syntax {% else %} runtime {% endif %} error with message: <pre>{{error.message}}</pre></p>
			This is on line {{error.line}} of 
			{% if error.source == "module" %}
				module {{error.file}}
			{% else %}
				the following code segment: {% include 'Instructors/CodeSegmentError.html' %}
			{% endif %}
		</p>
	{% elif error.type == 7705 %} <!-- Error in sorting.  This really shouldn't happen, but it's here for debugging our own code -->
		<p> There was an error in sorting the answer blanks into order.
		This happened for part number {{error.number}} and answer blank {{error.answer_name}} and the apparent result was {{error.result}}.
		</p>
	{% endif %}
{% endif %}
{% if q.evaluations %}
    {% for answer in q.evaluations %}
    <p>	
		{% if answer.success %}
			<span style='color: green;'>&#10004;</span> 
		{% else %}
			<span style='color: red;'>&#10006;</span>
		{% endif %}
		You got {{answer.value}} points on answer {{answer.name}}
		{% if answer.details %}
       		<ul class="collection">
      			{% for detail in answer.details %}
      				<li class="collection-item">
         			{% if detail.success %}
         				<span style='color: green;'>&#10004;</span> 
		  			{% else %}
			        	<span style='color: red;'>&#10006;</span> 
		        	{% endif %}
         			{{detail.value}}/{{detail.max_points}} points on criteria {{detail.name}}
		       		</li>
	       		{% endfor %}
   			</ul>
  		{% endif %}
  	</p>
  	{% endfor %}
{% endif %}
<div id="{{q.uniqid}}-{{part}}-exact">
  <div class="darkClassParent">
    <div id="{{q.uniqid}}-{{part}}-darkLayer" class="darkClass" style="display:none"></div>
    {{q.questiontext|safe}}
    {% if part > q.numParts %}
      <button class="btn waves-effect waves-light" type="button" value="Submit" name="{{q.uniqid}}-{{part}}" id="{{q.uniqid}}-{{part}}-submit" onclick="senddynamicquestion(this.name)">Submit<i class="material-icons right">send</i></button></form>'
	{% endif %}
  </div>
</div>

<div id="{{q.uniqid}}-{{part}}-results">
</div>