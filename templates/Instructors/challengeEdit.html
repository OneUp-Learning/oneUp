<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
       <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen"
     href="http://tarruda.github.com/bootstrap-datetimepicker/assets/css/bootstrap-datetimepicker.min.css">
       {% include 'scripts.html' %}
      
      <!--[if lt IE 7]>
      <link rel="stylesheet" href="/static/css/ie6.css" type="text/css" media="screen">
      <script type="text/javascript" src="/static/js/ie_png.js"></script>
      <script type="text/javascript">ie_png.fix('.png, footer, header nav ul li a, .nav-bg, .list li img');</script>
      <![endif]-->
      <!--[if lt IE 9]><script type="text/javascript" src="/static/js/html5.js"></script><![endif]-->
    	<script type="text/javascript"
     src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script> 
    <script type="text/javascript"
     src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js">
    </script>
    <script type="text/javascript"
     src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.min.js">
    </script>
    <script type="text/javascript"
     src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.pt-BR.js">
    </script>
    <script type="text/javascript">
       $('#datetimepicker').datetimepicker({
         format: 'dd/MM/yyyy hh:mm:ss',
         language: 'pt-BR'
       });
    </script>  
    <script type="text/javascript">
    // This script handels the datetime fields (AH)
      $(function() {
    	  $('#datetimepicker2').datetimepicker({
              language: 'en',
              pick12HourFormat: true,
            
            });
         $('#datetimepicker3').datetimepicker({
           language: 'en',
           pick12HourFormat: true,
           
         });
        // Called when first datefield(Display From) is changed (AH)
   		$("#datetimepicker2").on('changeDate', function(e) {
   			// Sets the Start Date of the second datefield(Display Until) to be the assigned date of the
   			// first datefield(Display From) (AH)
   		  $("#datetimepicker3").data('datetimepicker').setStartDate(e.date);
   			// If the saved date for the second datefield is somehow before the first datefield date,
   			// set the second datefield to be the same as the first datefield (AH)
   		  if($("#datetimepicker3").data('datetimepicker').getDate() < e.date){
   			$("#datetimepicker3").data('datetimepicker').setDate(e.date);
   		  }
 		  console.log(e.date.toString());
 		});
   		// Called when first datefield(Display From) is changed (AH)
   		$("#datetimepicker3").on('changeDate', function(e) {
   			// Sets the End Date of the first datefield(Display From) to be the assigned date of the
   			// second datefield(Display Until) (AH)
  		  $("#datetimepicker2").data('datetimepicker').setEndDate(e.date);
  			// If the saved date for the first datefield is somehow after the second datefield date,
 			// set the first datefield to be the same as the second datefield (AH)
  		  if($("#datetimepicker2").data('datetimepicker').getDate() > e.date){
  			$("#datetimepicker2").data('datetimepicker').setDate(e.date);
  		  }
  			console.log(e.date.toString());
   		});
        
      });
    </script> 
      <script type="text/javascript">
         function goToNewPage()
         {
             var url1 = document.getElementById('qtype').value;
             var url2 = document.getElementById('list').value;
             if(url1 != 'none') 
             {
                 window.location = url1;
                 url1='none'
             }
             else
             {
                 window.location = url2;
                 url2='none'
             }
             
         }
      </script>
   </head>
   
   <body>
      <div id="page-wrapper">
         
        {% include 'heading.html' %}
         
         <div class="frame" id="grad" align="center">
            <div class="container">
            <div class="row">
            <div class="12u">
               <h1>Create New <span>Challenge</span></h1>
               <p><span>*</span>Denotes Required Fields.</p>
               <div>
<!-- INSERTED PAGE CONTENT -->
				<form name="question" action="/oneUp/instructors/challengeEdit" method="POST" >
    		{% csrf_token %}
					<input type="hidden" name="challengeID" id="challengeID" value="{{challengeID}}">
				<table class="bg">
        			<tr>
            			<th>Challenge Name<span>*</span></th>
        			</tr>
        			<tr>
                		<td><input id="mediumFormBox" type="text" name="challengeName" value="{{challengeName}}" required></td>
            		</tr>
        			<tr>
            			<th>Difficulty<span>*</span></th>
        			</tr>
            		<tr>
                    	<td><form method="post">
                        <select id="difficulty" name="challengeDifficulty" >
			                <option value="" disabled selected>Select Difficulty</option>
			                <option id="Easy" value="Easy">Easy</option>
			                <option id="Medium" value="Medium">Medium</option>
			                <option id="Hard" value="Hard">Hard</option>
			            </select>
			            </form>
			            
						<!-- script  type="text/javascript"> 
						window.onload = function() {
						    document.getElementById("{{challengeDifficulty}}").selected = "true";
						}
						</script  -->
						</td>
            		</tr>
        			<tr>
            			<th>Number of Attempts<span>*</span></th> 
        			</tr>
            		<tr>
	                    <td><input id="extraSmallFormBox" type="number" name="numberAttempts" value="{{numberAttempts}}" min="1" max="999" required></td>
            		</tr>
       				<tr>
            			<th>Time Limit (in minutes) <span>*</span></th> 
        			</tr>
            		<tr>
                    	<td><input id="extraSmallFormBox" type="number" name="timeLimit" value="{{timeLimit}}" min="1" max="999" required></td>
            		</tr>
		 			<tr>
            			<th>Tags</th>
        			</tr>
            		<tr>
                    	<td><textarea id="mediumFormBox" name="tags" value="{{tags}}">{{tags}}</textarea>Enter tags separated by commas (,)</td>
            		</tr>
					<tr>
                    	<th>Topics </th>
                	</tr> 
                	<tr> 
                		<td>Selected Topics for this Challenge <br>
                		{% if isGraded %}
                		<input id="mediumFormBox" type="text" name="all_Topics" id="sendTopic"  value="{{all_Topics}}" disabled></td>
                	</tr>
		 			<tr>
		 				<td>Add New Topic<br> 
						<select name="Topic" id="sendTopic2" accesskey="target" font-family= "Tahoma, Geneva, sans-serif" required>
					  	{% else %}
					  	<input id="mediumFormBox" type="text" name="all_Topics" value="{{all_Topics}}" disabled></td>
					  	</td></tr>
					<tr>
						<td>Add New Topic<br>
						<select name="Topic" id="{{i}}" accesskey="target" font-family= "Tahoma, Geneva, sans-serif">
					  	{% endif %}
					  	<option  value="" selected>Select Topic</option>
					{% for i,topic_ID,topic_Name in topic_range %}
						<div id="topic{{i}}">
							<option value="{{topic_ID}}">{{topic_Name}}</option>							  	
						</div>
					{% endfor %}
						</select>
						</td>
					</tr>
					<tr>
						<td>
						{% if isGraded %}
            				<input type="checkbox" name ="isGraded" value="true" checked="true" 
							onchange="document.getElementById('sendTopic').disabled = this.checked; 
							document.getElementById('sendTopic2').disabled = this.checked;"> Is this challenge going to be graded? 
        				{% else %}
        					<input type="checkbox" name ="isGraded">Is this challenge going to be graded?
        				{% endif %}
						</td>
					</tr>
					<tr>
            			<th>Feedback Options</th>
        			</tr>
            		<tr>
						<td><input type="checkbox" name="feedbackOption" value="1" checked="">Display Correct Answer</td>
					</tr>
					<tr>			
						<td><input type="checkbox" name="feedbackOption" value="2">Display Correct Answer Feedback</td>
					</tr>
					<tr>			
						<td><input type="checkbox" name="feedbackOption" value="3">Display Incorrect Answer Feedback</td>
					</tr>	
					<tr>
						<td align="left"><input type="submit" name="done" value="Save" class="button">								
						<a href="/oneUp/instructors/challengesList"><input type="button" value="Cancel"></a></td>
					</tr>
				</table>	
				</form>
				<br>
         </div></div></div></div>
         </div>
         <!-- Footer -->

       {% include 'footer.html' %}

      </div>
      <script type="text/javascript"> Cufon.now(); </script>
   </body>
</html>