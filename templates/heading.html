<header>
<style>
    i.icon-yellow:hover {
        color: yellow;
    }
    .dropdown-nested {
			overflow-y: visible;
		}
		.dropdown-content .dropdown-content {
			margin-left: 100%;
		}
    .notification-count-parent:hover,
    .clearAll:hover
     {
        background-color: white;
    }
    .notification-badge {
        position:relative;
        padding:5px 9px;
        background-color: #fff;
        color: #941e1e;
        bottom: 15px;
        left: 15px;
        border-radius: 50%;
    }
    .notification-badge .hide {
        display: none;
    }
    .notification-icon {
        position: relative;
    }
    .notification-icon-notify {
        position: absolute;
    }
    .nav-dropdown-link, .nav-dropdown-link:hover {
        background-color: transparent !important;
    }
</style>
{% load staticfiles %}       
{% load notification_tags %}
{% include_notify_js_variables %}
<script src="{% static "notify/notifyX.js" %}"></script>
<script>
        var read_notifications = false;
		var unread_notifications = 0;
        var updateSuccess = function (response) {
            var notification_box_desktop = $('#notifications-desktop');
            var notification_box_mobile = $('#notifications-mobile');
            var notifications = response.notifications;
            var course_id = '{{course_id}}';
            read_notifications = false;
            $.each(notifications, function (i, notification) {
				let notification_data = JSON.parse(notification.data);
				// console.log(notification_data);
                unread_notifications += 1;
                unread_notifications = Math.min(unread_notifications, 6);
				if(notification_data['course'] == course_id){
					notification_box_desktop.prepend(notification.html);
					notification_box_mobile.prepend(notification.html);
				}
            });

            removeDuplicates();
            countNotifications();
            //IF table on page then update
        };
        var deleteSuccess = function(response, $notification){
            // If notification deleted from desktop remove from mobile side as well and vice versa
            var notification_box_desktop = $('#notifications-desktop');
            var notification_box_mobile = $('#notifications-mobile');

            var notification_id = $notification.attr("data-id");

            function removeAll(notification_box, id){
                notification_box.children("li[data-nf-id='"+id+"']").each(function(index){
                    $(this).remove();
                });
            }

            removeAll(notification_box_desktop, notification_id);
            removeAll(notification_box_mobile, notification_id);
        }
        var removeDuplicates = function(){
            // Fixes weird bug with notifications. Once notification is created it can create more than one at a time.
            // Ex. student buys 3 items from shop it sends 6 notifications
            var notification_box_desktop = $('#notifications-desktop');
            var notification_box_mobile = $('#notifications-mobile');

            function removeDupes(notification_box){
                var seen = {};
                notification_box.children().each(function(index){
                    if(seen[$(this).attr("data-nf-id")] == true){
                        $(this).remove();
                    }
                    else{
                        seen[$(this).attr("data-nf-id")] = true;
                    }
                });
            }

            removeDupes(notification_box_desktop);
            removeDupes(notification_box_mobile);
        }
        function limitNotifications(limit){
            // Limit notifications on both mobile and desktop sides
            var notification_box_desktop = $('#notifications-desktop');
            var notification_box_mobile = $('#notifications-mobile');

            function limitNotificationsInBox(notification_box){
                var notifications = notification_box.children();
                var size = notifications.length;

                if(size <= limit) return;

                var stop_index = size - limit;
                for(var i = size-1; i > ((size-1) - stop_index); i--){
                    notifications[i].parentNode.removeChild(notifications[i]);
                }
                
            }

            limitNotificationsInBox(notification_box_desktop);
            limitNotificationsInBox(notification_box_mobile);
        }
        function countNotifications(){
            // Limit the number of notifications 
            limitNotifications(6);

            // Get number of notifications which is double becuase of the mobile nav so divide it back down
            let numItems = Math.max(Math.trunc($('.navNotifications').length/2.0), 0);

            // Desktop/Tablet element
            // let tooltip_element = $("#notification-count-desktop");
            // Mobile element
            let badge_element = document.getElementById("notification-count-mobile");

            // Get the badge count elements of the number of notifications
            notification_count_elements = document.getElementsByClassName('notification-count');
            for(var i = 0; i < notification_count_elements.length; i++){
                let element = notification_count_elements[i];
                // Set parent to visible/none if there are some notifications not read and vice versa
                if(numItems > 0)
                    element.parentNode.parentNode.style.display = "inline";
                else
                    element.parentNode.parentNode.style.display = "none";

                element.innerHTML = numItems;
            }
            // Hide/Show the clearAll elements 
            clearAll_elements = document.getElementsByClassName('clearAll');
            for(var i = 0; i < clearAll_elements.length; i++){
                let element = clearAll_elements[i];
                if(numItems > 0)
                    element.parentNode.style.display = "inline";
                else 
                    element.parentNode.style.display = "none";
            }
            if(numItems == 0){
                // Set tooltip count and change icon to signal no notifications
                
                // tooltip_element.attr('data-tooltip', "No Notifications");
                // // tooltip_element.children(":first").html('notifications');
				// tooltip_element.children(":first").removeClass("notification-icon-notify");
				// tooltip_element.children(":first").addClass("notification-icon");
                // tooltip_element.tooltip();
                
                // $(".notification-badge").addClass("hide");
                
                // Create no notification element for desktop view
                desktop_notifications = document.getElementById("notifications-desktop");
                // Remove unwanted default notification which is <b>no notifications yet</b>
                if(desktop_notifications.getElementsByTagName('b').length > 0){
                    while (desktop_notifications.lastChild) {
                        desktop_notifications.removeChild(desktop_notifications.lastChild);
                    }
                }
                if(desktop_notifications.children.length <= 0){
                    x = document.createElement('li');
                    x.innerHTML = "<a class='no-notifications waves-effect nav-dropdown-link' href='#!'>No new notifications yet</a>"
                    desktop_notifications.appendChild(x, desktop_notifications);
                }

                // Hide badge for mobile view
                // badge_element.style.display = "none";
                
                // Create no notification element for mobile view
                mobile_notifications = document.getElementById("notifications-mobile");
                // Remove unwanted default notification which is <b>no notifications yet</b>
                if(mobile_notifications.getElementsByTagName('b').length > 0){
                    while (mobile_notifications.lastChild) {
                        mobile_notifications.removeChild(mobile_notifications.lastChild);
                    }
                }
                if(mobile_notifications.children.length <= 0){
                    x = document.createElement('li');
                    x.innerHTML = "<a class='no-notifications waves-effect nav-dropdown-link' href='#!'>No new notifications yet</a>"
                    mobile_notifications.appendChild(x, mobile_notifications);
                }
                
    
            } else {
                // Remove the no-notification elements
                no_notifcation_elements = document.getElementsByClassName('no-notifications');
                for(var i = 0; i < no_notifcation_elements.length; i++){
                    let element = no_notifcation_elements[i];
                    element.parentNode.parentNode.removeChild(element.parentNode);                    
                }

                // // Set tooltip count and change icon to signal notifications
                // tooltip_element.attr('data-tooltip', numItems + " New");
                // // tooltip_element.children(":first").html('notifications_active');
				// tooltip_element.children(":first").removeClass("notification-icon");
                // tooltip_element.children(":first").addClass("notification-icon-notify");
                // tooltip_element.tooltip();
                
            }
            if(unread_notifications > 0){
				$(".notification-badge").removeClass("hide").html(unread_notifications);
				$('#notification-count-desktop').children(":first").addClass("notification-icon-notify")
				$('#notification-count-desktop').children(":first").removeClass("notification-icon")
				// Show badge for mobile view and set count 
                badge_element.style.display = "block";
                badge_element.textContent= unread_notifications;
			} else {
				$(".notification-badge").addClass("hide");
				$('#notification-count-desktop').children(":first").removeClass("notification-icon-notify")
				$('#notification-count-desktop').children(":first").addClass("notification-icon")
				// Hide badge for mobile view
                badge_element.style.display = "none";
			}
        }
        
        $(document).ready(function() {
            countNotifications();
            unread_notifications = Math.max(Math.trunc($('.navNotifications').length/2.0), 0);
            $('.tooltipped').tooltip({delay: 50});
            $('.dropdown-button-badges').dropdown({
                hover: true, // Activate on hover
                gutter: $("#gamefeats").width() * 2, // Spacing from edge
                alignment: 'right' // Displays dropdown with edge aligned to the left of button
                }
            );
            $('.dropdown-button-vc').dropdown({
                hover: true, // Activate on hover,
                constrainWidth: false,
                gutter: $("#gamefeats").width() * 2, // Spacing from edge
                alignment: 'right' // Displays dropdown with edge aligned to the left of button
                }
            );
            $('#notifications-mobile-link, #notification-count-desktop').click(() => {
				read_notifications = true;
				unread_notifications = 0;
			});
            
        });	
        
        $(document).on('click', '.clearAll', function() {
            $(".delete-box").click();
            countNotifications();
        });
    </script>
    <form action="/oneUp/instructors/resetTestStudent" method="POST">
        {% csrf_token %}
        <input type=hidden  name="courseID" value={{courseId}}>
        <div id="reset_test_student" class="modal">
            <div class="modal-content">
                <h5>Are you sure you want to reset Test Student's data? This action will delete any taken challenge, activity, earned badge, and virtual currency. </h5>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-light btn-flat" style="color: #00bcd4">Cancel</a>
                <button class="modal-action modal-close waves-effect waves-light btn-flat" type="submit" name="submit" value="Delete">Reset</button>                                        
            </div>
        </div>
    </form>

    <ul id="account" class="dropdown-content">
        <li class="nav-dropdown-link"><p style="padding-left: 16px; padding-right: 8px">Welcome, {{username}}</p></li>            
        <li class="nav-dropdown-link"><p style="padding-left: 16px; padding-right: 8px">Course: {{course_Name}}</p></li>
        <li class="divider"></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/administrators/courses">Change Course</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/students/Logout">Logout</a></li>
    </ul>
    <ul id="visualization" class="dropdown-content">
        <li><a class="waves-effect" href="/oneUp/instructors/classAchievementsViz?serious">Serious Challenges</a></li>
        <li><a class="waves-effect" href="/oneUp/instructors/classAchievementsViz?warmUp">Warm-Up Challenges</a></li>
        <li><a class="waves-effect" href="/oneUp/instructors/classAchievementsViz?skills">Skills</a></li>  
    </ul>
    <ul id="import-export" class="dropdown-content">
        <li><a class="waves-effect" href="/oneUp/instructors/exportChallenges">Export Challenges</a></li>
        <li><a class="waves-effect" href="/oneUp/instructors/uploadChallenges">Import Challenges</a></li>
        <li><a class="waves-effect" href="/oneUp/instructors/exportGradebook">Export GradeBook</a></li>
        <!-- <li><a class="waves-effect" href="/oneUp/instructors/exportCourse">Export Course</a></li> -->
        <!-- <li><a class="waves-effect" href="/oneUp/instructors/importCourse">Import Course</a></li> -->
    </ul>
    <ul id="virtualcurrency" class="dropdown-content"> 
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/VirtualCurrencySpendRuleList">Spending Rules</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/VirtualCurrencyEarnRuleList?isRuleCustom=false">Automatic Earning Rules</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/PeriodicVirtualCurrencyEarnRuleList">Time Period Earning Rules</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/VirtualCurrencyEarnRuleList?isRuleCustom=true">Manual Earning Rules</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/AddVirtualCurrency">Add Virtual Currency to Students</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/VirtualCurrencyTransactions">Student Transactions</a></li>  
    </ul>
    <ul id="virtualcurrency-mobile" class="dropdown-content"> 
        <li><a class="waves-effect" href="/oneUp/badges/VirtualCurrencySpendRuleList">Spending Rules</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/VirtualCurrencyEarnRuleList?isRuleCustom=false">Automatic Earning Rules</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/PeriodicVirtualCurrencyEarnRuleList">Time Period Earning Rules</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/VirtualCurrencyEarnRuleList?isRuleCustom=true">Manual Earning Rules</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/AddVirtualCurrency">Add Virtual Currency To Students</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/VirtualCurrencyTransactions">Student Transactions</a></li>  
    </ul>
    <ul id="badges" class="dropdown-content">
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/Badges">Automatic & Manual Badges</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/PeriodicBadges">Time-Period Based Badges</a></li>
        <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/AddBadgeManually">Add Badges to Students</a></li>
    </ul>
    <ul id="badges-mobile" class="dropdown-content">
        <li><a class="waves-effect" href="/oneUp/badges/Badges">Automatic & Manual Badges</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/PeriodicBadges">Time-Period Based Badges</a></li>
        <li><a class="waves-effect" href="/oneUp/badges/AddBadgeManually">Add Badges to Students</a></li>
    </ul>
    <nav>
        <div class="nav-wrapper">
        <a href="#" class="brand-logo"><i class="large material-icons icon-yellow">lightbulb_outline</i>OneUp</a>
        <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
            <li>
                <a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="coursetools">Course Tools</a>
                <ul id="coursetools" class="dropdown-content">
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/instructorHome">Instructor's Home</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/instructorCourseHome">Course Home</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/announcementList">Announcements</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/studentAttendance">Set Student Attendance</a></li>
                    {% if ccparams.chatUsed %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/chat/api">Chat</a></li>
                    {% endif %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/exportChallenges">Export Challenges</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/uploadChallenges">Import Challenges</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/exportGradebook">Export GradeBook</a></li>  
                    <!-- <li><a class="waves-effect" href="/oneUp/instructors/exportCourse">Export Course</a></li> -->
                    <!-- <li><a class="waves-effect" href="/oneUp/instructors/importCourse">Import Course</a></li>                       -->
                  	<li><a class="modal-trigger" href="#reset_test_student">Reset Test Student</a></li>                   	
                </ul>
            </li>
            <li>
                <a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="courseinfo">Course Information</a>
                <ul id="courseinfo" class="dropdown-content">
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/courseInformation">Course Description</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/topicsList">Course Topics</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/activityCats">Activity Categories</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/skillsList">Targeted Skills</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/milestonesList">Course Milestones</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/createStudentListView">Students</a></li>
                    {% if ccparams.gamificationUsed and ccparams.streaksUsed %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/attendanceStreaks">Attendance Streaks</a></li>
                    {% endif %}
                    {% if ccparams.gamificationUsed and ccparams.leaderboardUsed %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/instructorLeaderboard">Course Leaderboard</a></li>
                    {% endif %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/courseConfiguration">Course Configuration</a></li>                    
                </ul>
            </li>
            <li>
                <a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="coursecontent">Course Content</a>
                <ul id="coursecontent" class="dropdown-content">
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/activitiesList">Activities</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/challengesList">Serious Challenges</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/warmUpChallengeList">Warm-Up Challenges</a></li>						
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/challengeQuestionsList?problems">Problems</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/imageList">Images</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/luaLibUploadView">Libraries for Dynamic Problems</a></li>
                </ul>
            </li>
            <li>
                <a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="coursereports">Course Reports</a>
                <ul id="coursereports" class="dropdown-content">
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/studentAchievements">Students Scores</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/classAchievements">Class Scores</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/studentSummary">Student Summary</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/studentAttendanceReport">Student Attendance</a></li>   
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/classAchievementsViz?serious">Serious Challenges Visualization</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/classAchievementsViz?warmUp">Warm-Up Challenges Visualization</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/classAchievementsViz?skills">Skills Visualization</a></li>
                    {% if ccparams.gamificationUsed and ccparams.classmatesChallenges %}
                    <li><a class="waves-effect nav-dropdown-link"  href="/oneUp/instructors/challengeClassmatesReport">Challenge Classmates Report</a></li>
                    {% endif %}
                </ul>
            </li>
            {% if ccparams.gamificationUsed %}
            <li>
                <a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="gamefeats">Game Features</a>
                <ul id="gamefeats" class="dropdown-content dropdown-nested">
                    {% if ccparams.badgesUsed %}
                    <li><a class="dropdown-button-badges nav-dropdown-link" href="#!" data-activates="badges">Badges</a></li>
                    {% endif %}
                    {% if ccparams.virtualCurrencyUsed %}
                    <li><a class="dropdown-button-vc nav-dropdown-link" href="#!" data-activates="virtualcurrency" >Virtual Currency</a></li>
                    {% endif %}
                    {% if ccparams.leaderboardUsed %}
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/dynamicLeaderboard">Leaderboards</a></li>    
                    {% endif %}               
                    
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/badges/ProgressiveUnlocking">Content Unlocking</a></li>   
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/debugSysVars">Debug System Variables</a></li>
                    <li><a class="waves-effect nav-dropdown-link" href="/oneUp/instructors/preferences">Gamification Configuration</a></li>
                </ul>
            </li>
            {% endif %}
            <li>
                <a class="waves-effect" href="/oneUp/instructors/instructorQA">Help</a>
            </li>
            <li>
                <a id='notification-count-desktop' class='dropdown-button tooltipped' href='#!' data-constrainwidth ='false' data-beloworigin='true' data-activates='notifications' data-position="left" data-delay="50">
                    <i class='material-icons notification-icon'>notifications</i> <!-- This needs to be linked to an actual notification page -->
                    <small class="notification-badge hide"></small>
                </a>
                <ul id="notifications" class="dropdown-content" style="max-width: 36vw;">
                    <li><a class="notification-count-parent" href="#!">Notifications <span style="float:right;" class="badge notification-count"></span></a></li>
                    <div id="notifications-desktop" class="notification-box-list">
                    {% user_notifications for box %}
                    </div>
                    <li><a class="clearAll waves-effect" href="#!"><i class="material-icons">clear_all</i>Clear All</a></li>
                </ul>
            </li>
            <li>
                <a id='switchview' class='dropdown-button tooltipped' data-tooltip="Switch to student view"  href="/oneUp/instructors/switchView?teacher=true&courseID={{courseId}}" >
                    <i class='material-icons'>visibility</i> 
                </a>
            </li>
            {% if logged_in %}            
            <li><a class="dropdown-button" href="#!" data-constrainwidth="false" data-beloworigin="true" data-activates="account"><i class="material-icons">more_vert</i></a></li>
            {% endif %}
        </ul>


        <!--MOBILE-->
        <ul class="side-nav" id="slide-out">
            {% if logged_in %}
            <li>
                <div class="user-view">
                    <div class="background">
                      <img src="/static/images/pic01.jpg">
                    </div>
                    <a href="#!user"><img class="circle" src="/static/images/avatars/anonymous.png"></a>
                    <a href="#!name"><span class="white-text name">Welcome, {{username}}</span></a>
                    <a href="#!course"><span class="white-text email">Course: {{course_Name}}</span></a>
                  </div>
            </li>   
            {% endif %}             
            <li class="no-padding">
                <ul class="collapsible collapsible-accordion">
                    <li>
                        <a class="collapsible-header"><i class="material-icons">build</i>Course Tools</a>
                        <div class="collapsible-body">
                            <ul>
                                <li><a class="waves-effect" href="/oneUp/instructors/instructorHome">Instructor's Home</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/instructorCourseHome">Course Home</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/announcementList">Announcements</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/studentAttendance">Set Student Attendance</a></li>
                                {% if ccparams.chatUsed %}
                                <li><a class="waves-effect" href="/oneUp/chat/api">Chat</a></li>
                                {% endif %}
                                <li><a class="dropdown-button" href="#!" data-constrainwidth="false" data-alignment="right" data-beloworigin="true" data-activates="import-export">Import/Export<i class="material-icons right">more_vert</i></a></li>                                    
                                <li><a class="modal-trigger" href="#reset_test_student">Reset Test Student</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="collapsible-header"><i class="material-icons">info</i>Course Information</a>
                        <div class="collapsible-body">
                            <ul>
                                <li><a class="waves-effect" href="/oneUp/instructors/courseInformation">Course Description</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/topicsList">Course Topics</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/activityCats">Activity Categories</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/skillsList">Targeted Skills</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/milestonesList">Course Milestones</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/createStudentListView">Students</a></li>
                                {% if ccparams.gamificationUsed and ccparams.streaksUsed %}
                                <li><a class="waves-effect" href="/oneUp/instructors/attendanceStreaks">Attendance Streaks</a></li>
                                {% endif %}
                                {% if ccparams.gamificationUsed and ccparams.leaderboardUsed %}
                                <li><a class="waves-effect" href="/oneUp/instructors/leaderboard">Course Leaderboard</a></li>
                                {% endif %}
                                <li><a class="waves-effect" href="/oneUp/instructors/courseConfiguration">Course Configuration</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="collapsible-header"><i class="material-icons">library_books</i>Course Content</a>
                        <div class="collapsible-body">
                            <ul>
                                <li><a class="waves-effect" href="/oneUp/instructors/activitiesList">Activities</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/challengesList">Serious Challenges</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/warmUpChallengeList">Warm-Up Challenges</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/challengeQuestionsList?problems">Problems</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/imageList">Images</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/luaLibUploadView">Libraries for Dynamic Problems</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="collapsible-header"><i class="material-icons">assessment</i>Course Reports</a>
                        <div class="collapsible-body">
                            <ul>
                                <li><a class="waves-effect" href="/oneUp/instructors/studentAchievements">Students Scores</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/classAchievements">Class Scores</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/studentSummary">Students Summary</a></li>                                                              
                                <li><a class="waves-effect" href="/oneUp/instructors/studentAttendance">Student Attendance</a></li>
                                {% if ccparams.gamificationUsed and ccparams.classmatesChallenges %}
                                <li><a class="waves-effect" href="/oneUp/instructors/challengeClassmatesReport">Challenge Classmates Report</a><li>
                                {% endif %}
                                <li><a class="dropdown-button" href="#!" data-constrainwidth="false" data-alignment="right" data-beloworigin="true" data-activates="visualization">Visualization<i class="material-icons right">more_vert</i></a></li>
                            </ul>
                        </div>
                    </li>
                    {% if ccparams.gamificationUsed %}
                    <li>
                        <a class="collapsible-header"><i class="material-icons">extension</i>Game Features</a>
                        <div class="collapsible-body">
                            <ul>
                                {% if ccparams.badgesUsed %}
                                <li><a class="dropdown-button" href="#!" data-constrainwidth="false" data-alignment="right" data-beloworigin="true" data-activates="badges-mobile">Badges<i class="material-icons right">more_vert</i></a></li>
                                {% endif %}
                                {% if ccparams.leaderboardUsed %}    
                                <li><a class="waves-effect" href="/oneUp/instructors/dynamicLeaderboard">Leaderboards</a></li>  
                                {% endif %}     
                                {% if ccparams.virtualCurrencyUsed %}            
                                <li><a class="dropdown-button" href="#!" data-constrainwidth="false" data-alignment="right" data-beloworigin="true" data-activates="virtualcurrency-mobile">Virtual Currency<i class="material-icons right">more_vert</i></a></li>
                                {% endif %}
                                <li><a class="waves-effect" href="/oneUp/badges/ProgressiveUnlocking">Content Unlocking</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/debugSysVars">Debug System Variables</a></li>
                                <li><a class="waves-effect" href="/oneUp/instructors/preferences">Gamification Configuration</a></li>
                        </div>
                    </li>
                    {% endif %}
                    <li>
                        <a class="collapsible-header waves-effect" href="/oneUp/instructors/instructorQA"><i class="material-icons">help</i>Help</a>
                    </li>
                    <li>
                        <a class='collapsible-header'><i class='material-icons'>notifications</i>Notifications  <div class='right'><span id='notification-count-mobile' class="new badge red"></span></div></a>
                        <div class='collapsible-body'>
                            <ul>
                                <div id="notifications-mobile" class="notification-box-list">
                                {% user_notifications for box %}
                                </div>			
                                <li><a class="clearAll waves-effect" href="#!"><i class="material-icons">clear_all</i>Clear All</a></li>					
                            </ul>
                        </div>
                    </li>
                    <li>
		                <a id='switchview' style="padding-left: 16px !important" class='dropdown-button tooltipped' data-tooltip="Switch to student view"  href="/oneUp/instructors/switchView?teacher=true&courseID={{courseId}}" >
		                    <i class='material-icons'>visibility</i> 
		                </a>
		            </li>
                </ul>
            </li>
            {% if logged_in %}                        
            <li class="divider"></li>
            <li><a class="waves-effect" href="/oneUp/administrators/courses">Change Course</a></li>
            <li><a class="waves-effect" href="/oneUp/students/Logout">Logout</a></li>
            {% endif %}
        </ul>
        </div>
    </nav>
</header>

